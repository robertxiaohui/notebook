# 回车换行那些事情



## 回车和换行的历史

回车”（Carriage Return）和“换行”（Line Feed）这两个概念的来历和区别。

符号    ASCII码      意义

\n        10              换行（Line Feed）

\r        13               回车(Carriage Return）



在计算机还没有出现之前，有一种叫做电传打字机（Teletype Model 33，Linux/Unix下的tty概念也来自于此）的玩意，每秒钟可以打10个字符。但是它有一个问题，就是打完一行换行的时候，要用去0.2秒，正好可以打两个字符。要是在这0.2秒里面，又有新的字符传过来，那么这个字符将丢失。

于是，研制人员想了个办法解决这个问题，就是在每行后面加两个表示结束的字符。一个叫做“回车”，告诉打字机把打印头定位在左边界；另一个叫做“换行”，告诉打字机把纸向下移一行。这就是“换行”和“回车”的来历，从它们的英语名字上也可以看出一二。

后来，计算机发明了，这两个概念也就被般到了计算机上。那时，存储器很贵，一些科学家认为在每行结尾加两个字符太浪费了，加一个就可以。于是，就出现了分歧。





## 不同系统下表示换行的字符

- 在微软的MS-DOS和Windows中，使用“回车CR('\r')”和“换行LF('\n')”两个字符作为换行符;
- Windows系统里面，每行结尾是 回车+换行(CR+LF)，即“\r\n”；
- Unix系统里，每行结尾只有 换行CR，即“\n”；
- Mac系统里，每行结尾是 回车CR 即'\r'；
- 所以我们平时编写文件的回车符应该确切来说叫做回车换行符；

### 造成的影响

####   1.linux上用vim写的文件test.txt拷贝到windows上， 结果所有的内容都显示在一行中。（当然， 如果你Windows上的编辑显示器够智能， 那就是另外一回事了，==现在的编辑器都是非常智能的会识别文本的换行符是哪个平台的，然后根据不同平台展示出换行的结果==）

![image-20200922125933950](https://raw.githubusercontent.com/yusenyi123/pictures1/master/imgs/20200922125934.png)

####    2.Windows上建立的test.txt拷贝到linux上， 结果linux程序运行异常。（当然， 如果你的linux程序足够健壮， 那就没有问题了）

####     ps. 当你在Windows上写好linux shell script, 拷贝到linux下运行， 就会出问题。





## 不同平台不同代码语言对于\r和\n

### 1.在windows平台下

**在文本编辑器中按enter键换行 <====> C语言代码中往文件输入\n  <====> 文件存储了\r\n(0x0d0x0a) <====>c语言代码读取文件的是\n**



#### 解释：

在Windows上的dos.txt文件中， 按一下enter键， 实际上就相当于C程序写\n字符，而由于历史原因， 写文件的时候， Windows系统会自动在\n前面加上\r, 这样， dos.txt文件中就有了\r\n了， 在读取的时候， Windows系统会自动去掉\r, 所以你的C程序根本读不到\r， 还是\n.



java程序不区分平台，所以java程序可以读取出\r，在向文件写入\n的时候系统也不会自动添加\r，所以在windows平台下想使用java程序向文件中输入换行需要write("\r\n")

### 2.在linux平台下

 **在文本编辑器中按enter键换行 <====>  C语言代码中往文件输入\n <====> 文件存储了\n(0x0a)  <====> 程序真正读取的是\n**





