# 理解系统调用



## 系统调用是操作系统提供给应用程序的接口

### 系统调用是接口,本质就是(传参指令+陷入指令)



### 为什么需要系统调用?

```
操作系统的诞生是为了提高cpu运行效率，也就是多道程序并发执行，但多道程序并发执行的时候，不可避免都会使用到系统资源（如内存，输入输出设备等），如果程序可以直接对系统资源进行操作，那么当多个程序对同一个系统资源进行操作时，就会产生错误的结果，

如生活场景：你去学校打印店打印论文，当你按下“打印”之后，打印机开始工作。你的论文打印到一半时，另一位同学按下了“打印”按钮开始打印他自己的论文。
如果各个进程可以随意地使用打印机，会发生什么情况？
你的论文打印到一半时，另一位同学按下了“打印”按钮开始打印他自己的论文。结果，你的后半部分论文与该同学的页面混杂在一起了。


为了让每个程序不能直接对系统资源进行操作，并且这些程序对系统资源的操作是按照一定顺序的，就产生了系统调用这个概念，操作系统提供“系统调用”功能，用户进程要使用共享资源，只能通过系统调用向操作系统发出请求。操作系统会对各个请求进行协调管理。

所以系统调用也更像是一种规范，为了让我们编写的程序能够多道程序并发执行不产生错误，我们编写的应用程序对系统资源的操作就要使用系统调用这样的方式，体现在代码上就是使用传参指令和陷入指令



应用程序通过系统调用请求操作系统的服务。而系统中的各种共享资源都由操作系统内核统一掌管，因此凡是与共享资源有关的操作(如存储分配、I/O操作、文件管理等)，都必须通过系统调用的方式向操作系统内核提出服务请求，由操作系统内核代为完成。这样可以保证系统的稳定性和安全性，防止用户进行非法操作
```



### 系统调用的目的:应用程序只能通过系统调用的方式请求操作系统内核为其服务，应用程序通过操作系统间接的使用系统资源(系统资源只能由操作系统软件来访问，应用程序都是通过操作系统间接访问的)





## 系统调用

### 系统调用程序(系统调用服务程序，系统调用程序是操作系统的一部分，常驻内存)



### 系统调用接口(操作系统提供给应用程序的服务调用接口，本质上是传参指令+陷入指令 ，在应用程序编写中使用该接口，在执行时就会向操作系统申请服务，间接通过操作系统对资源进行使用)





![image-20210306140836662](https://raw.githubusercontent.com/yusenyi123/pictures2/master/imgs/20210306140836.png)

