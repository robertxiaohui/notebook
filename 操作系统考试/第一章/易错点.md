# 易错点

## 参考：

https://www.cnblogs.com/eleven24/articles/7788468.html

https://www.cnblogs.com/jiading/p/12606978.html

https://www.coursera.org/lecture/jisuanji-zucheng/804-zhong-duan-de-chu-li-guo-cheng-07GcN



https://introspelliam.github.io/2017/08/07/int-80h%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8%E6%96%B9%E6%B3%95/

https://cloud.tencent.com/developer/article/1008587



https://www.binss.me/blog/the-analysis-of-linux-system-call/

https://www.cnblogs.com/wuchanming/p/4490622.html

## 1.执行系统调用

```
执行系统调用指的是执行系统调用程序
```







## 2.外中断过程

```
1. 中断请求
中断源产生中断信号


2. 中断响应
cpu每次执行完一条指令后，会进行中断信号检查，当符合一些条件时，选择一个中断信号进行响应
CPU响应中断必须满足以下3个条件：
①中断源有中断请求。
②cpu处于开中断模式
③如果当前正在执行中断处理程序的指令，新发生的中断优先级比(当前执行的中断处理程序对应的中断)高



3.中断处理

1.执行中断隐指令(由硬件来实现)

中断隐指令执行内容包括
① 关中断
② 保存断点，即将pc寄存器的值存入内存(就是入内核栈)中(该pc寄存器的值指向的是发生中断的指令的下一条指令)，这样在运行完中断处理程序进行出栈 继续运行下一条指令

③ 查找中断处理程序的入口地址，把入口地址存入pc寄存器


2. 中断隐指令执行结束后，pc寄存器中存放了中断处理程序的入口地址，那么按照指令依次执行的逻辑，下面就会执行中断处理程序


中断处理程序执行内容包括
① 保护现场
保护现场就是将通用寄存器和状态寄存器(如果是允许多重中断的情景，还会有屏蔽字寄存器)
② 开中断(如果是允许多重中断的情况)

③ 执行相应的主体服务(发生中断真正的目的)

④ 恢复现场
 
⑤ 中断返回 (执行出栈，将前面入栈的pc取出)

```





## 3.内中断过程

```
操作系统中有一个表，是用来保存各个系统调用函数的地址的。这个表是一个数组，所以通过下标就可以访问到不同函数的地址。故可以做到一个中断号+各样的系统调用号就管理多个系统调用。
```

